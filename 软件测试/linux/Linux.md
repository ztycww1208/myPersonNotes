# Linux

## 1  操作系统

### 1.1  定义

什么是操作系统? 操作系统就是软件与计算机硬件进行交互的一个媒介

### 1.2  分类(了解)

- **桌面操作系统**：
  - windows：用户量
  -  macos：苹果研发，主用设计（视网膜屏幕）
  -  Linux：软件较少
- **服务器型操作系统**：
  - Linux：占有量达到90%以上
  - windows server：微软开发的，收费
- **移动设备操作系统**：
  - Android：安卓手机系统，开源，基于Linux 
  - iOS：苹果手机系统，闭源
  - 嵌入式操作系统： Linux为主的,常见的摄像头，电饭煲等其他设备





## 2  什么是Linux

> Linux是一款多用户，多任务的命令行式的服务器型操作系统

> 多用户：支持多个用户登录使用
>
> 多任务：支持多个任务同时运行
>
> 命令行式：使用命令的方式操作系统
>
> 服务器型：90%以上的服务器都会选择使用Linux系统

**Linux的优点：**

- 开源，免费
- 运行速度快
- 安全性比较好
- 稳定性较高

**Linux的缺点：**

- 软件比较少
- 界面比较简陋
- 操作难度偏大，学习成本较高（命令行）

> 发行版本 Linux实际上是一个操作系统的 内核 ，并不是一套完整的操作系统。一些厂商将Linux内 核与一些实用工
>
> 具和操作手册打包到一起，就形成了 发行版本。并且，发行版本提供了 便捷的安装界面以及配置工具。

> **主流发行版本：**
>
> Redhat：小红帽，企业级的Linux发行版本，收费
>
> CentOS：与小红帽有97%相似度，免费
>
> Ubuntu：界面比较美观
>
> suse：华为项目用的比较多
>
> 麒麟：国产系统

## 3  Linux的安装

### 3.1  安装虚拟机软件--Vmware

是一款虚拟机软件，可以模拟出一个/多个电脑，用来安装不同的操作系统

> **在Vmware中安装centos：**
>
> 

### 3.2  连接工具Xshell

> 1.安装xshell
>
> 2.在Linux操作系统中ifconfifig找到ip 
>
> 3.打开xshell连接

### 3.3 登录界面初步认识

> [root @ zhangtianyi~]# 



> 有一个超级用户root,登录了zhangtianyi这台计算机,在计算机 的家目录的位置 
>
> root：代表登录的用户名 
>
> zhangtianyi：代表计算机的名字 
>
> ~ ：代表登录后所在位置, ~代表家目录 
>
> \# ：身份象征符,代表的是超级用户 
>
> $ ：表示普通用户 





## 4  常用基本命令

**常见目录** 

> `/ `：根目录 
>
> `~ `：家目录（root用户的家目录是/root，但是普通用户是在/home/用户名） 
>
> `.` ：当前目录 
>
> `..` ：上级目录 或者 父目录 
>
> `cd` :切换路径（改变文件位置） 



> `whoami` 查看当前登录用户 
>
> `pwd` 显示当前所在位置[eg:/root/a 其中第一个/表示根目录,其他的/表示文件 夹之间的分隔符] 
>
> `ls` 查看当前位置的内容 
>
> `ls -a` 查看当前位置的内容，包含隐藏内容 
>
> `ll` 查看当前位置的内容（详情） 
>
> > ll -rt :
> >
> > -t：按时间排序（默认最近的在最上面）
> >
> > -r：reverse  反向
>
> `ifconfig` 查看ip地址 
>
> `clear `清除屏幕上的历史命令

## 5  路径

> 定义：路径就是文件在系统中的存储位置 
>
> 在Linux中，路径可以分为两大类： 
>
> - `绝对路径`：以根目录开始的路径 
> - `相对路径`：不以根目录开始的路径

## 6  目录操作

### 6.1  新建目录

```linux
mkdir 	目录名                          	 --新建空目录     make directory

mkdir	 -p 	目录层级                  --新建非空目录
```

### 6.2  删除目录

```linux
rmdir 	目录名 			--删除空目录 

rm 	-rf	 目录名 			--删除非空目录[慎用]
```

### 6.3  复制目录

```
cp	 -r 	目录名 	路径 		--将目录复制到某个路径
```

### 6.4  备份目录

```
cp 	-r 	目录名 	目录名.bak 		--将目录备份
```

### 6.5  移动/剪切目录

```
mv	 目录名	 路径                              --将目录移动到某个路径
```

### 6.6  改名目录

```
mv 	旧目录 	新目录 			--给目录改名
```

### 6.7  查看目录大小

```
du	 -sh	 目录名
```

### 6.8 查看目录结构

```
tree 	目录名 

备注:	如果没有tree命令,要先安装:	yum -y install tree
```





## 7  文件操作

### 7.1  创建文件

```
touch	文件名
```

### 7.2  删除文件

```
rm 	-f 	    文件名
 
rm	-rf	   文件名
```

### 7.3  复制文件

```
cp 	文件名	 路径
```

### 7.4  备份文件

```
cp 	   文件名 	 文件名.bak
```

### 7.5  移动/剪切文件

```
mv 	文件名	 路径
```

### 7.6  改名文件

```
mv	 旧文件名	 新文件名
```

### 7.7  查看文件大小

```
du 	  -sh 	文件名
```

### 7.8  查看文件内容 

```
cat 	文件名			 :一次性查看文件内容,适用于小文件

more 	文件名 		:按空格键继续,按Q键退出--到了文件结尾会退出 
less 	文件名			 :按空格键继续,按Q键退出--到了文件结尾不会退出,可以上下翻页

head     -n     文件名	 	      :查看文件的前N行 
tail 	-n 	  文件名	          :查看文件的后N行

head   -n   文件名 | tail   -n	    :先从前面查N行,再从查询结果中后面取N行

备注: 
如果查看日志文件:	tail -n 日志文件名
```

### 7.9  查看文件行数[wc]

1  常用：

wc   :   word  count

```
wc 	-l 	文件名
```

> wc -l  和  grep  -c  ：
>
> 前者：统计整个文件或输入内容的行数
>
> 后者：统计搜索包含关键字行的行数
>
>  
>
> `思考`：那么grep  关键字  文件名  |  wc  l   有什么作用呢？直接用grep  -c   关键字  文件名  不是更好吗？



2  其他参数：

- -c 统计字节数。
- `-l` 统计行数。
- -m 统计字符数。这个标志不能与 -c 标志一起使用。
- -w 统计字数。注意，这里的字指的是由`空格，换行符等分隔`的字符串。

```
如果是直接  ： wc  文件名
打印出来的是：（文件行数）（个数）（字节数）文件名
```

注意：字节数和字符数的区别：

字节数：字节是数据占用空间的大小，字节是一个单位

字符数：一个字符可能包含多个字符。例如：utf-8中，一个英文是一个字节，一个中文是三个字节

> wc -m  统计的字符数会多一个，wc  -c  统计字节数也会多一个
>
> 如：$ echo  测试 |  wc  -c  ==》  7
>
> ​		$  echo  测试  |  wc   -m      ==》 3

### 7.10  查找文件/目录[find]

```
find   路径  -name   文件名 

通配符: 		* 
前模糊: 		*值 
后模糊: 		值* 
前后模糊:	      *值*

备注:	
find可以将文件和目录都找出来

find   .   -name   '*a*'       ---查找当前位置下名字中包含a的文件或者目录

--只查找文件 
        find   路径   -type   f 		; 遍历 
        ll   |   grep   ^- 			;仅查找当前位置的文件 
--只查找目录 
	find   路径  -type   d
	
```

### 7.11  在文件中查找关键字[grep]

> grep  全称：`Global Regular Expression Print`（全局  正则表达式  打印）

```
grep 	关键字 	文件名 		--显示关键字所在的行的内容 
grep 	-n 	关键字 	文件名 		--显示关键字所在的行的内容和行号 
grep	 -i	 关键字 	文件名 		--忽略大小写查找

grep     -c   关键字    文件名            -- 统计包含关键字的 行数
```

### 7.12  覆盖文件

  `>`	 :定向输出符,把前面文件的内容定向输出到后面的文件中

```
cat	 x1 > x2 			--用x1覆盖文件x2 
```

### 7.13  清空文件

注意：`/dev/null`

```
cat      /dev/null > x2 		--用空文件/dev/null清空文件x2
```

### 7.14  追加文件

`>>  `     :追加符,把前面文件的内容追加到后面的文件后

```
cat    x1 >> x2                 --将文件x1的内容追加到文件x2的后面 
```

### 7.15  监控文件

```
tail 	-f 	     日志文件 			--监控日志文件 
tail 	-f 	-n 	数字  日志文件			 --监控日志文件的后N行 

tail  -f  -n  3  install.log                          --监控日志文件的后3行
```

> `常用命令: `
>
> clear :清屏 
>
> ctrl + c :终止命令 
>
> ctrl + z :撤销命令 





## 8  编辑文件【Vi编辑器】

> vi编辑:是Linux的编辑器,可以对Linux的文件进行编辑. 
>
> vi编辑有三种模式:`命令模式 编辑模式 末行模式 `
>
> 如何进入Vi编辑:  
>
> vi   文件名          ---首先进入的是命令模式 

### 8.1  命令模式

> `gg `					--跳转到首行 
>
> `ngg `				--跳转n行 
>
> `G `					--跳转到最后一行 
>
> `^ 	`				--行首 
>
> `$ `					--行尾 
>
> `yy `					--复制一行 
>
> `nyy `				--复制n行 
>
> `dd` 					--剪切/删除一行 
>
> `ndd `				--剪切/删除n行 



> `P(大写) `				--向上粘贴 
>
> `p(小写) `				--向下粘贴 
>
> `u` 						--撤销操作 
>
> `x `						--删除当前字符 
>
> `/字符 `					--向下查找字符,按n键继续查找下一个 
>
> `?字符 `					--向上查找字符,按n继续查找下一个

### 8.2  编辑模式

> `a`	 :在光标后插入内容 
>
> `i `	:在光标前插入内容 
>
> `s`	 :替换当前字符插入 
>
> `o`	 :另起一行插入内容 

### 8.3  末行模式

> `:set nu 	`							--显示行号 
>
> `:set 	nonu `					--取消行号 
>
> `:w	`							 	--只保存,不退出 
>
> `:q `									--只退出,不保存 （对于未修改的文件） 
>
> `:wq `								--保存退出 
>
> `:q! `								--强制退出 （如果有改动，会提示使用！） 
>
> `:wq!` 							--强制保存退出 （文件所有者通过 wq! 可以保存只读文件 ） 
>
> 
>
> `:%s:值1:值2 `						--将每一行的第一个 值1 替换为值2, 
>
> `:%s:值1:值2:g `					--将每一行的每一个 值1 替换为值2 
>
> `:数字1,数字2s:值1:值2 	`	--将数字1到数字2的第一个 值1 替换为值2 
>
> `:数字1,数字2s:值1:值2:g`		 --将数字1到数字2的每一个 值1 替换为值2 
>
> 备注：冒号也可以替换成其他的如`/`
>
> :数字1,数字2s/值1/值2/g



## 9  用户操作[user]

```
useradd     tracy                                                                         创建用户,叫tracy

cat 	/etc/passwd                                                                查看用户信息

usermod   -l   lily    tracy 							修改用户tracy为lily 
( usermod -l 新用户名 旧用户名            -l    :login )

usermod    -u 	505     lily                                                       修改用户lily的用户id为505 
usermod    -g     500     lily                                                 修改用户lily的组id为500【组id要存在】 
useradd     -g     500      lucy                            创建一个用户lucy,把她指定添500的组【组id要存在】

passwd    lucy                                                                           修改用户lucy的密码 
id    lucy                                                                                    查看lucy用户信息 
su - lily                                                                                      切换到用户lily,并拥有lily的权限 
exit                                                                                            退出用户 	

userdel     lily                                                                             只删除用户,不删除用户的文件 
userdel     -r     lucy                                                                    彻底删除用户,包括用户的文件

备注:  每创建一个用户,linux会自动创建以用户命名的组,以及家目录文件
#   sudo 是赋权
#   su   是切换用户
```

```
zty:x:500:500:zty:/home/zty:/bin/bash
(用户名)：（密码）：（用户id）：（组id）：（描述信息）：（家目录）：（解释器）
```



## 10  组的操作[group]

```
groupadd        abc                                                                     创建一个组叫abc 

cat        /etc/group                                                                    查看组的信息 

groupmod      -n   aaa     abc                                                     把abc的组改名为aaa 
(groupmod    -n  新组名   旧组名) 

groupmod     -g    502     abc                                                      把组abc的组id更改为502 
(groupmod    -g    新组id   组名                                                --组id是没有组使用的id) 

groupdel        abc                                                                        删除组abc         
```

## 11  打包压缩

### 11.1 zig

zip:  可以对 `文件` 和 `目录` 进行压缩,可以`一次压缩 多个` ,压缩完以后,  `源文件还存在`  ---以.zip结尾 

```
zip     -r     压缩包名.zip      文件/目录                   ---对文件/目录进行压缩 

unzip       压缩包名.zip                                            ---解压 

unzip 	压缩包名.zip     -d      路径                          ---将压缩包解压到指定路径
```

### 11.2  gzip

gzip :  对`文件`进行压缩,`一次只能压缩一个`文件,压缩以后`源文件消失`---以 .gz结尾

```
gzip      文件名                                        --对文件进行压缩 

gzip     -l    文件.gz                                 --查看压缩比例 

gunzip    文件.gz                                         解压文件 
gzip   -d    文件.gz                                      解压文件 

gzip     -n    文件                                        --按照指定压缩等级压缩文件[n表示压缩等级,是一个1-9的数字,数字越大,表示压缩机别越 高]
```

### 11.3 tar

tar    :打包,可以`将多个文件或者目录`打包成`一个`,打包后的文件`不改变大小` -- 以.tar结尾 

```
tar      -cvf     a_x1_x2.tar      a x1 x2                                          --将a 和x1 x2 打包成a_x1_x2.tar 

tar      -tvf     a.tar                                                                                           --查看包a.tar 

tar      -xvf     a.tar                                                                                            --解包 a.tar

因为打包后的文件大小不变,  如果要压缩还需要进一步操作,所以 延伸为  打包压缩:   -以.tar.gz

tar     -czvf     a.tar.gz    a x1 x2                                      --将a目录和x1 x2文件打包压缩成 a.tar.gz 

tar     -tzvf     a.tar.gz                          --查看压缩包a.tar.gz 

tar     -xzvf      a.tar.gz                             --解压解包 a.tar.gz 

tar     -xzvf     a.tar.gz     -C     /home                                    --将压缩包解压解包到/home目录
```

## 12  权限

### 12.1  权限类型

`r `: read 读 

`w` : write 写 

`x `: execute 执行 

### 12.2  权限对应的对象

`u` :user 用户自己 

`g` :group 组内 

`o` :other 其他人 

`a `:all 所有人,指` ugo`

### 12.3  查看权限

> `d rwx r-x r-x. 2 root root 4096 4月 26 16:12 a`

> 第一位:代表文件类型,d表示目录,-表示文件 
>
> 2-10位:表示文件的权限 
>
> 2: 表示硬链接的个数（了解） 
>
> root:所属用户--这个文件属于哪一个用户 
>
> root:所属组--这个文件属于哪一个组 
>
> 4096:文件大小,以字节为单位 
>
> 4月 26 :表示创建日期 
>
> 16:12 :表示最后修改时间 
>
> a :表示文件或者目录的名字 

> rwxr-xr-x: 
>
> 前三个:代表用户的权限 
>
> 中间三个:代表组的权限 
>
> 后三个:代表其他人的权限

> 备注:  权限的顺序必须是 rwx,针对的对象的顺序也必须是有序的:用户 组内 其他人
>
> 没有的权限就用 - 表示

复制（深拷贝）和硬链接（浅拷贝）和软连接

硬链接：ln  文件名   文件名_hard

软连接：ln  -s  文件名   文件名_soft

### 12.4 `chmod` 修改权限

```
chmod :                                               change mode 
chmod    g+w          aa                        ---给文件aa修改权限:组内人增加写的权限 
chmod    u+x,o-r     aa                         ---针对文件aa给自己增加执行权限,其他人减少读的权 限

chmod    u-x,g+w,o-r    c             --针对C目录,自己减少执行权限,组内增加写的权限,其他人减少读的权限 

chmod    u=rwx,g=rw,o=x    b                  --修改b目录的权限为自己读写执行,组内读写,其他人执行 

chmod    761    b 

chmod    u=rw,g=wx,o=rx     b                   --修改b目录权限为:自己:读写 组内:写执行 其他人 :读执行 

chmod 635 b 
```



### 12.5  权限的数字表示方法

r:     读 4 

w:    写 2 

x:     执行 1 

```
chmod    u=rw,g=wx,o=rx    b                      --修改b目录权限为:自己:读写 组内:写执行 其 他人 :读执行
                                                                        等同于      chmod     635     b 
                                                                        
chmod     63    b ===  chmod    063   b         --自己没有权限,组内人有读写权限,其他 人写执行权限

chmod        7       b                              ---自己和组内人没有权限,其他人有读写执行的权限 

chmod     -R   653     a.bak                --将目录a.bak以及子内容的权限都修改为自己读写,组 内读执行,其他人写执行
```



### 12.6  `chown` 修改文件所属用户

```
chown     lily      x1                              --将x1文件的所属用户更改为lily 

备注:  更改的用户一定要存在 

chown     -R     lily     a                         --将a以及子内容的所属用户修改为lily
```



### 12.7  `chgrp`修改文件所属组

chown   -R  `用户名`：`组名`    文件名 

```
chgrp     修改文件所属组 

chgrp     -R     abc     a.bak                                  --将a.bak以及子内容的所属组修改abc 

chown     lily:abc     b.unl                                    --同时修改b.unl文件的所属用户为lily,所属组为abc 

chown     -R     lily:abc     a.bak                          --同时修改a.bak以及子内容的所属用户为lily,所属组为abc
```



## 13  网络命令

```
1.查看ip地址 
ifconfig 

2.查看网络是否连通 
ping ip地址                           --如果有返回值,表示网络连通,否则不是 

3.查看端口 
netstat -an                             --查看系统目前在使用的端口 
netstat -an | grep 端口号          --查看端口是否被占用 

4.启动网卡 
ifup eth0 

启动第三张网卡
ifup eth2 

5.关闭网卡 
ifdown eth0 

6.重启网络 
service network restart 

7.修改ip地址 
1.   setup---网络设置中修改--保存--重启网络                         ---永久修改ip地址 

2.   ifconfig   eth0   ip地址   netmask   子网掩码                              ---临时修改ip
```



## 14  系统命令

```
关机
halt 
init 0 
shutdown -h now ---立刻关机 
shutdown -h 00:00 ---12:00关

重启
reboot 
init 6 
shutdown -r now --立即重启

查看进程
ps -ef --查看进程 
ps -ef | grep java --查看java的进程

杀死进程
kill pid(进程id)     ----杀掉进程 
kill -9 pid ---强制杀死进程 

安装
yum -y install 服务名     ---安装程序
启动
service    httpd    start/restart/stop/status                --apache服务启动/重启/停止/查看状态


free    -m                                             --查看内存 
df    -h                                                --查看磁盘 
top                                                    --动态查看系统资源 
vmstat    2    3                                   --每2秒打印一次系统资源,一共打印3次 
env                                                    --查看环境变量 

date                                                     --查看时间 
date    -s    '2020-04-28 11:00:00'               --修改时间 
cal                                                      --查看日历

查看系统版本：
cat   /etc/centos-release

远程复制: 
scp    -r    root@192.168.0.130:/opt/x1    . 
--从ip为192.168.0.130的root用户的/opt目录下将x1复制到当前位置

scp    -r    /opt/x1    root@192.168.0.130:/ 
--将自己的/opt/x1复制到ip为192.168.0.130的root用户的根目录下

scp    -r     别人的用户名@别人的ip地址:要复制的文件的路径    目的地路径         --从别人那复制给自己 
scp    -r    要复制的文件的路径      别人的用户名@别人的ip地址:目的地路径         --从 自己这里复制给别人

```

> sftp   root@ip地址
> get   文件名
> put   文件名

## 15 windows远程连接桌面步骤

1 进入服务，启用Remote Desktop  三个

2 重启防火墙，windows firewall

3 电脑属性设置远程允许连接

4 mstsc -v  ip

## 16 其他操作

### 16.1封装命令

1   cd  /home/zty        家目录下

2   ll -a

3  vi   .bashrc    找到隐藏目录

4 添加  ：

​	alias  'm=cd /home'

5  加载：

​	source  .bashrc

`注意`：封装的名字不能为已经存在的命令名字

### 16.2  xshell下面向所有选项卡发送命令

在xshell窗口下，可以输入任何命令

### 16.3 sftp 远程获取和拷贝文件

> sftp   root@ip地址
> get   文件名
> put   文件名
>
> 退出：exit

### 16.4 ftp插件

notepad++ 中的插件 nppftp

